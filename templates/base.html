{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}BestConnect{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="theme-switcher">
        <button onclick="toggleTheme()" id="themeToggle" aria-label="Changer de th√®me">
            <span class="icon">‚òÄÔ∏è</span>
        </button>
    </div>

    <div class="container">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        {% block content %}{% endblock %}
    </div>

    <script>
        // Fonction pour basculer le th√®me
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = document.body.classList.contains('dark-theme');
            
            // Mettre √† jour le th√®me imm√©diatement
            if (isDark) {
                document.body.classList.remove('dark-theme');
                localStorage.setItem('theme', 'light');
            } else {
                document.body.classList.add('dark-theme');
                localStorage.setItem('theme', 'dark');
            }
            
            // Mettre √† jour l'ic√¥ne pour afficher le th√®me SUIVANT
            const themeIcon = document.querySelector('.icon');
            themeIcon.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
            
            // D√©sactiver le bouton pendant un court instant pour √©viter les clics multiples
            const button = document.getElementById('themeToggle');
            button.disabled = true;
            setTimeout(() => {
                button.disabled = false;
            }, 300);
        }

        // Restaurer le th√®me au chargement
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
            // Mettre √† jour l'ic√¥ne pour afficher le th√®me SUIVANT au chargement
            const themeIcon = document.querySelector('.icon');
            themeIcon.textContent = savedTheme === 'light' ? 'üåô' : '‚òÄÔ∏è';
        });
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html> 